<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>삼성생명 골든 종신보험 | VVIP Premium Wealth Strategy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.6;
        }
        
        .hero-bg {
            background: linear-gradient(135deg, #0F1B2D 0%, #1D4F91 50%, #2B5CE6 100%);
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, #D4AF37 0%, #F4E27C 100%);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        .btn-premium {
            background: linear-gradient(135deg, #D4AF37 0%, #F4E27C 100%);
            color: #0F1B2D;
            transition: all 0.3s ease;
        }
        
        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4);
        }
        /* KakaoTalk Button Style */
        .btn-kakao {
            background-color: #FEE500;
            color: #3C1E1E;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .btn-kakao:hover {
            background-color: #f7d200;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-yellow-200">
        <div class="container mx-auto px-6 py-4">
            <nav class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-800 to-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">S</span>
                    </div>
                    <div>
                        <div class="text-xl font-bold text-gray-900">삼성생명</div>
                        <div class="text-xs text-gray-500">VVIP Premium</div>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#intro" class="text-gray-700 hover:text-yellow-600 font-medium">상품 소개</a>
                    <a href="#features" class="text-gray-700 hover:text-yellow-600 font-medium">핵심 특징</a>
                    <a href="#strategy" class="text-gray-700 hover:text-yellow-600 font-medium">자산 전략</a>
                    <button class="btn-premium px-6 py-2 rounded-full font-bold" onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'})">
                        상담 신청
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-bg min-h-screen flex items-center justify-center text-white pt-20" id="intro">
        <div class="container mx-auto px-6 text-center">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-5xl lg:text-7xl font-black mb-6 leading-tight">
                    <span class="text-yellow-400 block">상속과 은퇴,</span>
                    <span class="block mt-2">두 마리 토끼를 잡는</span>
                    <span class="block mt-2 text-4xl lg:text-5xl text-yellow-300">혁신 전략</span>
                </h1>
                
                <p class="text-xl lg:text-2xl font-light max-w-3xl mx-auto mb-12 opacity-90">
                    납입 보험료 <span class="text-yellow-400 font-semibold">100%를 인출</span>해도 
                    <span class="text-yellow-400 font-semibold">사망보장이 훼손 없이 종신토록</span> 유지되는 업계 최초 상품
                </p>

                <div class="mb-16">
                    <button class="btn-premium text-xl px-8 py-4 rounded-full font-bold" onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'})">
                        VVIP 전용 상담 신청
                    </button>
                </div>

                <!-- Stats Card -->
                <div class="glass-card rounded-3xl p-8 max-w-2xl mx-auto">
                    <div class="grid grid-cols-2 gap-8 text-center">
                        <div>
                            <div class="text-5xl font-black text-yellow-400 mb-2">100%</div>
                            <div class="text-lg font-medium text-gray-800">납입 보험료 인출 가능</div>
                        </div>
                        <div>
                            <div class="text-5xl font-black text-yellow-400 mb-2">종신</div>
                            <div class="text-lg font-medium text-gray-800">사망 보장 유지 기간</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-24 bg-white" id="features">
        <div class="container mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-4xl lg:text-5xl font-black mb-6 text-gray-900">
                    골든 종신보험 <span class="text-yellow-600">핵심 특징</span>
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    업계 최초의 혁신적인 구조로 VVIP 고객의 자산관리 니즈를 완벽하게 충족합니다.
                </p>
            </div>

            <div class="grid lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
                <!-- Feature 1 -->
                <div class="feature-card bg-white rounded-3xl p-10 text-center shadow-xl transition-all duration-300">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-800 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-8">
                        <span class="text-3xl">💎</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-900">보장 훼손 없는 인출</h3>
                    <p class="text-gray-600 text-lg">
                        납입 보험료 전액을 인출(리턴 자금)하여 활용해도, 최초 가입 금액의 
                        <span class="font-semibold text-yellow-600">사망 보장은 그대로 종신토록 유지</span>됩니다.
                    </p>
                </div>

                <!-- Feature 2 -->
                <div class="feature-card bg-white rounded-3xl p-10 text-center shadow-xl transition-all duration-300">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-800 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-8">
                        <span class="text-3xl">💰</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-900">은퇴 자금 선(先) 활용</h3>
                    <p class="text-gray-600 text-lg">
                        인출한 리턴 자금은 은퇴 후 생활 자금, 투자 자금 등 
                        <span class="font-semibold text-yellow-600">고객이 원하는 시점에 자유롭게 활용</span>할 수 있습니다.
                    </p>
                </div>

                <!-- Feature 3 -->
                <div class="feature-card bg-white rounded-3xl p-10 text-center shadow-xl transition-all duration-300">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-800 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-8">
                        <span class="text-3xl">🛡️</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-900">상속세 재원 확보</h3>
                    <p class="text-gray-600 text-lg">
                        사망 보장금은 유가족에게 <span class="font-semibold text-yellow-600">상속세 재원으로 활용</span>될 수 있으며, 
                        생전 자금 인출과 독립적으로 운영됩니다.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Strategy Section -->
    <section class="py-24 bg-gradient-to-br from-gray-50 to-blue-50" id="strategy">
        <div class="container mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-4xl lg:text-5xl font-black mb-6 text-gray-900">
                    VVIP <span class="text-yellow-600">자산 활용 전략</span>
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    은퇴 시점 자금 활용과 상속 재원 마련을 동시에 해결한 실제 사례 시뮬레이션
                </p>
            </div>

            <div class="max-w-6xl mx-auto">
                <div class="glass-card rounded-3xl p-12">
                    <div class="grid lg:grid-cols-2 gap-16">
                        <!-- Strategy Steps -->
                        <div class="space-y-12">
                            <div class="flex items-start space-x-6">
                                <div class="w-16 h-16 bg-gradient-to-r from-blue-800 to-blue-600 rounded-2xl flex items-center justify-center flex-shrink-0">
                                    <span class="text-white font-black text-2xl">1</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-2xl text-gray-800 mb-3">고객 상황</h4>
                                    <p class="text-gray-700 text-lg">
                                        자산가 A씨 (50세)<br>
                                        <span class="font-semibold text-yellow-600">상속세 재원 및 은퇴 후 유동성 확보 희망</span>
                                    </p>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-6">
                                <div class="w-16 h-16 gold-gradient rounded-2xl flex items-center justify-center flex-shrink-0">
                                    <span class="text-gray-900 font-black text-2xl">2</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-2xl text-gray-800 mb-3">상품 활용</h4>
                                    <p class="text-gray-700 text-lg">
                                        골든 종신보험 가입<br>
                                        <span class="font-semibold text-yellow-600">(7년납, 총 납입액 8.5억원)</span>
                                    </p>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-6">
                                <div class="w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center flex-shrink-0">
                                    <span class="text-white font-black text-2xl">3</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-2xl text-gray-800 mb-3">활용 결과</h4>
                                    <p class="text-gray-700 text-lg">
                                        은퇴시점(67세)에 <span class="font-bold text-green-600">8.5억원 인출</span>하여 개인 투자자금으로 활용.<br>
                                        사망시 <span class="font-bold text-yellow-600">상속세 재원(사망보장금)</span>은 
                                        <span class="font-bold text-green-600">훼손없이</span> 자녀에게 지급
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Optimization Points -->
                        <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-10 rounded-3xl">
                            <h4 class="text-3xl font-black mb-8 text-gray-900 flex items-center">
                                <span class="text-4xl mr-4">🎯</span> 최적화 포인트
                            </h4>
                            <div class="space-y-6">
                                <div class="flex items-start space-x-4">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full mt-3 flex-shrink-0"></div>
                                    <div>
                                        <h5 class="font-bold text-lg text-gray-800 mb-2">자금 이중 활용</h5>
                                        <p class="text-gray-700">
                                            납입 자금은 생전에 활용하고, 사망 보장은 그대로 유지하여 상속 재원으로 사용
                                        </p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full mt-3 flex-shrink-0"></div>
                                    <div>
                                        <h5 class="font-bold text-lg text-gray-800 mb-2">유동성 확보</h5>
                                        <p class="text-gray-700">
                                            고액 자산가의 세금 납부 및 유동성 문제를 동시에 해결
                                        </p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full mt-3 flex-shrink-0"></div>
                                    <div>
                                        <h5 class="font-bold text-lg text-gray-800 mb-2">자유로운 설계</h5>
                                        <p class="text-gray-700">
                                            가입 시점부터 인출 가능 시점까지 자산 포트폴리오의 유연성을 극대화
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-16">
                        <button class="btn-premium text-xl px-8 py-4 rounded-full font-bold" onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'})">
                            전문가와 심층 상담하기
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Form Section -->
    <section class="py-24 bg-white" id="contact">
        <div class="container mx-auto px-6 max-w-2xl">
            <div class="text-center mb-16">
                <h2 class="text-4xl lg:text-5xl font-black mb-6 text-gray-900">
                    VVIP <span class="text-yellow-600">전문가 상담 신청</span>
                </h2>
                <p class="text-xl text-gray-600">
                    프리미엄 자산 관리 전략은 전문가와의 1:1 맞춤 상담을 통해 시작됩니다.
                </p>
            </div>

            <form id="consultationForm" class="glass-card rounded-3xl p-12 space-y-8">
                <div>
                    <label for="name" class="block text-lg font-semibold text-gray-800 mb-3">
                        성함 <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="name" name="name" required 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-all text-lg" 
                           placeholder="성함을 입력해주세요">
                </div>

                <div>
                    <label for="phone" class="block text-lg font-semibold text-gray-800 mb-3">
                        연락처 <span class="text-red-500">*</span>
                    </label>
                    <input type="tel" id="phone" name="phone" required 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-all text-lg" 
                           placeholder="010-1234-5678">
                </div>

                <div>
                    <label for="assets" class="block text-lg font-semibold text-gray-800 mb-3">
                        주요 관심 자산 규모 (선택)
                    </label>
                    <select id="assets" name="assets" 
                            class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-all text-lg">
                        <option value="">선택해주세요</option>
                        <option value="5억~10억">5억 ~ 10억원</option>
                        <option value="10억~30억">10억 ~ 30억원</option>
                        <option value="30억~50억">30억 ~ 50억원</option>
                        <option value="50억 이상">50억원 이상</option>
                    </select>
                </div>

                <div>
                    <label for="purpose" class="block text-lg font-semibold text-gray-800 mb-3">
                        주요 상담 목적 (선택)
                    </label>
                    <textarea id="purpose" name="purpose" rows="4" 
                              class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-all text-lg" 
                              placeholder="예: 상속세 재원 마련, 은퇴 후 자금 활용, 세금 최적화 전략 등"></textarea>
                </div>
                
                <!-- ID 추가 및 초기 텍스트 변경 -->
                <button type="submit" id="submitButton" disabled 
                        class="w-full py-5 gold-gradient text-gray-900 font-bold text-xl rounded-xl transition-all hover:shadow-xl">
                    데이터베이스 연결 중...
                </button>
                
                <p class="text-sm text-center text-gray-500 mt-6">
                    신청하신 모든 내용은 철저히 비밀이 보장되며, 오직 상담 목적으로만 활용됩니다.<br>
                    개인정보보호법에 따라 안전하게 관리됩니다.
                </p>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-20">
        <div class="container mx-auto px-6 text-center">
            <div class="mb-12 flex flex-col items-center">
                <div class="w-16 h-16 bg-gradient-to-r from-blue-800 to-blue-600 rounded-2xl flex items-center justify-center mb-6">
                    <span class="text-white font-bold text-2xl">S</span>
                </div>
                <div class="text-2xl font-bold text-yellow-400 mb-2">Samsung Financial Networks</div>
                <div class="text-3xl font-black text-white mb-2">박재박 팀장</div>
                <div class="text-4xl font-black text-yellow-400">010 - 5137 - 2327</div>
            </div>

            <div class="border-t border-gray-700 pt-12 mt-12">
                <div class="max-w-4xl mx-auto space-y-4">
                    <p class="text-sm opacity-70">
                        ※ 본 자료는 상품 이해를 돕기 위한 요약자료이며, 정확한 보장내용 및 제한사항은 
                        약관 및 상품설명서를 반드시 확인하시기 바랍니다.<br>
                        ※ 보험계약 체결 전 상품설명서 및 약관을 반드시 읽어보시기 바랍니다.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl p-12 max-w-md w-full mx-6 text-center">
            <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-8">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-2xl font-bold mb-4 text-gray-900">상담 신청 접수 완료</h3>
            <p id="modalMessage" class="text-gray-700 mb-6 text-lg"></p>
            
            <!-- 카카오톡 채널 추가 버튼: 초기 href를 빈 문자열로 변경했습니다. -->
            <a id="kakaoButton" href="" target="_blank" class="btn-kakao block w-full py-3 rounded-xl font-bold mb-4 flex items-center justify-center space-x-2">
                <!-- 카카오톡 로고 SVG -->
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10 0C4.477 0 0 4.275 0 9.539C0 12.753 1.708 15.65 4.341 17.425L3.627 20L7.545 18.069C8.328 18.252 9.155 18.358 10 18.358C15.523 18.358 20 14.083 20 8.819C20 3.555 15.523 0 10 0ZM9.999 15.424C6.906 15.424 4.39 13.125 4.39 10.29C4.39 7.455 6.906 5.156 9.999 5.156C13.093 5.156 15.609 7.455 15.609 10.29C15.609 13.125 13.093 15.424 9.999 15.424Z" fill="#3C1E1E"/>
                </svg>
                <span>카카오톡 채널 추가하기</span>
            </a>
            
            <!-- 닫기 버튼 -->
            <button onclick="closeModal()" class="w-full py-3 rounded-xl font-bold text-gray-600 border border-gray-300 hover:bg-gray-100 transition-colors">
                닫기
            </button>
        </div>
    </div>

    <!-- Error Modal for Submission Failure -->
    <div id="errorModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl p-12 max-w-md w-full mx-6 text-center">
            <div class="w-20 h-20 bg-gradient-to-r from-red-400 to-red-600 rounded-full flex items-center justify-center mx-auto mb-8">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </div>
            <h3 class="text-2xl font-bold mb-6 text-gray-900">상담 신청 오류</h3>
            <p id="errorMessage" class="text-gray-700 mb-8 text-lg">
                상담 신청 중 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.
            </p>
            <button onclick="closeModal('errorModal')" class="btn-premium w-full py-3 rounded-xl font-bold">
                확인
            </button>
        </div>
    </div>

    <script type="module">
        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // **[필수] 여기에 실제 고객님의 카카오톡 채널 주소를 입력하세요.**
        const KAKAO_CHANNEL_URL = "https://open.kakao.com/o/s15lHyCh"; 
        
        // Firebase Service Initialization
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app, db, auth;
        let isAuthReady = false;

        // 상담 신청 버튼 요소
        const submitButton = document.getElementById('submitButton');

        /**
         * 버튼의 상태(텍스트, 활성화 여부)를 업데이트합니다.
         * @param {('loading'|'ready'|'error')} state 현재 상태
         */
        function updateSubmitButtonState(state) {
            submitButton.classList.remove('gold-gradient', 'bg-red-500', 'text-white');
            submitButton.disabled = true;

            if (state === 'ready') {
                submitButton.textContent = 'VVIP 상담 신청 완료';
                submitButton.disabled = false;
                submitButton.classList.add('gold-gradient', 'text-gray-900');
            } else if (state === 'loading') {
                submitButton.textContent = '데이터베이스 연결 중...';
                submitButton.classList.add('gold-gradient', 'text-gray-900');
            } else if (state === 'error') {
                submitButton.textContent = '연결 오류. 새로고침 필요.';
                submitButton.classList.add('bg-red-500', 'text-white');
            }
        }

        // Initialize Firebase services and authenticate
        if (firebaseConfig) {
            updateSubmitButtonState('loading'); // 초기 상태: 로딩
            
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            setLogLevel('Debug');

            // Authentication check
            async function authenticate() {
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                        console.log("Authenticated with custom token.");
                    } else {
                        await signInAnonymously(auth);
                        console.log("Authenticated anonymously.");
                    }
                    isAuthReady = true;
                    updateSubmitButtonState('ready'); // 성공 시: 활성화
                } catch (error) {
                    console.error("Firebase Authentication failed:", error);
                    isAuthReady = false;
                    updateSubmitButtonState('error'); // 실패 시: 오류 표시
                }
            }
            authenticate();
        } else {
            console.error("Firebase configuration is missing. Data submission will not work.");
            updateSubmitButtonState('error'); // 설정 누락 시: 오류 표시
        }

        // Form submission handler
        document.getElementById('consultationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // 버튼이 활성화되지 않았다면, 연결 준비 중임을 다시 알리고 종료
            if (!isAuthReady) {
                document.getElementById('errorMessage').textContent = '데이터베이스 연결 준비 중입니다. 잠시 후 다시 시도해 주세요.';
                document.getElementById('errorModal').classList.remove('hidden');
                return;
            }

            // 1. 폼 데이터 수집
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const assets = document.getElementById('assets').value;
            const purpose = document.getElementById('purpose').value;

            const formData = {
                name: name,
                phone: phone.replace(/-/g, ''), // 하이픈 제거 후 전송
                assets: assets || '미선택',
                purpose: purpose || '없음',
                timestamp: new Date().toISOString(),
                source: "samsung_golden_landing_page"
            };
            
            // 전송 중임을 사용자에게 알림
            submitButton.textContent = '신청 중...';
            submitButton.disabled = true;

            try {
                // 2. Firebase Firestore에 데이터 저장 (공용/public 데이터 저장 경로 사용)
                const consultationsRef = collection(db, `artifacts/${appId}/public/data/consultations`);
                await addDoc(consultationsRef, formData);
                
                console.log("Consultation data saved successfully.");

                // 3. 성공 모달 표시 및 폼 초기화
                const message = `${name}님의 상담 신청이 성공적으로 접수되었습니다.\n\n` +
                                `📞 전담 VVIP 컨설턴트가 24시간 내에 ${phone}로 연락드리겠습니다.\n\n` +
                                (assets ? `💼 관심 자산 규모: ${assets}\n\n` : '') +
                                `프리미엄 자산관리 서비스를 경험해보세요.`;
                
                document.getElementById('modalMessage').innerHTML = message.replace(/\n/g, '<br>');
                
                // 카카오톡 버튼에 URL 설정
                document.getElementById('kakaoButton').href = KAKAO_CHANNEL_URL;
                
                document.getElementById('successModal').classList.remove('hidden');
                
                this.reset(); // 폼 필드 초기화
                
            } catch (error) {
                // 4. 전송 실패 시 에러 모달 표시
                console.error("Submission error (Firestore):", error);
                document.getElementById('errorMessage').textContent = `상담 신청 중 오류가 발생했습니다: ${error.message}. 잠시 후 다시 시도해 주세요.`;
                document.getElementById('errorModal').classList.remove('hidden');

            } finally {
                // 5. 버튼 상태 복구
                updateSubmitButtonState('ready');
            }
        });

        window.closeModal = function(modalId = 'successModal') {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^\d]/g, '');
            if (value.length >= 3) {
                if (value.length <= 7) {
                    value = value.replace(/(\d{3})(\d{1,4})/, '$1-$2');
                } else {
                    value = value.replace(/(\d{3})(\d{4})(\d{1,4})/, '$1-$2-$3');
                }
            }
            e.target.value = value;
        });

        // Smooth scrolling
        // 외부 URL을 사용하는 a 태그를 선택자에서 제외하도록 수정 (href="#...")인 태그만 대상으로 함
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                // href가 #으로 시작하더라도 비어있지 않은 경우(즉, #intro, #features 등)에만 처리
                const targetId = this.getAttribute('href');
                if (targetId && targetId !== '#') {
                    e.preventDefault();
                    const target = document.querySelector(targetId);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
    </script>

</body>
</html>